<% if @experience.present? %>
  <div class="container mt-4">
    <div class="row">
      <div class="col-md-8 offset-md-2 show_card ">
        <!-- Titre de l'expérience -->
        <h1 class="display-4 text-center mb-3"><%= @experience.name %></h1>

        <!-- Section photo de l'expérience -->
        <div class="text-center">
          <% if @experience.photo.attached? %>
            <%= image_tag @experience.photo, alt: "Image de l'expérience" %>
          <% else %>
            <p class="text-muted">Aucune photo disponible pour cette expérience.</p>
          <% end %>
        </div>

        <!-- Détails de l'expérience -->
        <div class="mt-4">
          <h4>Détails</h4>
          <div class="mb-3">
            <div class="body">
              <p><i class="fa-solid fa-house-chimney"></i> &nbsp<strong>Scène :</strong> <%= @experience.stage_name %></p>
              <p><i class="fa-solid fa-guitar"></i> &nbsp<strong>Genre musical :</strong> <%= @experience.musical_genre %></p>
              <p><i class="fa-solid fa-people-carry-box"></i> &nbsp<strong>Exigence absurde :</strong> <%= @experience.absurd_requirement %></p>
              <p><i class="fa-solid fa-money-check-dollar"></i> &nbsp<strong>Prix par jour :</strong> <%= @experience.price_per_day %> €</p>
            </div>
          </div>
        </div>

        <!-- Boutons de navigation -->
        <div class="text-center mb-5 mt-3">
          <%= link_to 'Retour à l\'accueil', root_path, class: "button m-2" %>
          <%= link_to "Réserver l'expérience", new_experience_booking_path(experience_id: @experience.id),
            class: "button m-2", id: "reserveButton" %>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal de confirmation -->
  <div class="modal fade" id="confirmationModal" tabindex="-1" aria-labelledby="confirmationModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="confirmationModalLabel">Réservation Confirmée !</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          Votre réservation pour <strong><%= @experience.name %></strong> a bien été prise en compte.
          Retrouvez-la dans votre tableau de bord !
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-primary" id="closeModalButton" data-bs-dismiss="modal">OK</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Script pour afficher la modale après réservation -->
<% if flash[:notice] == "Réservation confirmée !" %>
  <script>
    document.addEventListener("turbo:load", function() {
      var myModal = new bootstrap.Modal(document.getElementById('confirmationModal'));
      myModal.show();
      var closeButton = document.getElementById('closeModalButton');
      closeButton.addEventListener('click', function() {
        window.location.href = "<%= root_path %>";
      });
    });
  </script>
<% end %>
<% else %>
  <div class="container mt-5">
    <div class="row">
      <div class="col">
        <p class="text-center">Aucune expérience trouvée.</p>
      </div>
    </div>
  </div>
<% end %>
